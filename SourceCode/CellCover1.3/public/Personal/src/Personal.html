<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>个人中心</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="renderer" content="webkit">
    <meta property="qc:admins" content="77103107776157736375" />
    <meta property="wb:webmaster" content="c4f857219bfae3cb" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <meta http-equiv="Cache-Control" content="no-transform " />
    <meta name="keywords" content="寻亲网" />
    <meta name="description" content="寻亲网" />


    <link rel="stylesheet" href="../base.css" type="text/css" />
    <link rel="stylesheet" href="../common-less(1).css" type="text/css" />
    <link rel="stylesheet" href="../moco.min.css" type="text/css" />
    <link rel="stylesheet" href="../common-less.css" type="text/css" />
    <link rel="stylesheet" href="../profile-less.css" type="text/css" />

</head>

<body >

<div id="header">
    <div class="page-container" id="nav">
        <!--<div id="logo" class="logo"><a href="#" target="_self" class="hide-text" title="首页">ChinaXunQin</a></div>


        <button type="button" class="navbar-toggle visible-xs-block js-show-menu" >
            <i class="icon-menu"></i>
        </button>-->
        <ul class="nav-item">
            <li class="set-btn visible-xs-block js-header-avator"><a href="#" target="_self"><img width="40" height="40"></a></li>

          <!--  <li>
                <a href="../list"  target="_self"></a>
            </li>
            <li><a href="../program"  target="_self"><i class="icn-new"></i></a></li>-->
            <li>
                <a href="../../../" target="_self">返回首页</a>
            </li>
            <!--<li><a href="../wenda"  target="_self">D</a></li>
            <li><a href="../article"  target="_self">E</a></li>-->
            <li class="visible-xs-block"><a href="../setprofile" target="_self">我的设置</a></li>
            <li class="visible-xs-block"><a href="/passport/user/logout?referer=#" target="_self">退出</a></li>

        </ul>
        <div id="login-area">
            <ul class="clearfix logined">
                <!--<li class="header-app">
                    <a href="/mobile/app" >
                        <span class="icon-appdownload"></span>
                    </a>
                   &lt;!&ndash; <div class="QR-download">
                        <p id="app-text">APP下载</p>
                        <p id="app-type">iPhone / Android / iPad</p>
                        <img src="../QR-code.jpg">
                    </div>&ndash;&gt;
                </li>-->
               <!-- <li class='remind_warp'>
                    &lt;!&ndash; <i class="msg_remind"></i> &ndash;&gt;
                    <a target="_blank" href='/u/4566560/notices'>
                        <i class='icon-notifi'></i>
                        <span class="msg_icon" style="display: none;"></span>
                    </a>
                </li>-->
              <!--  <li class="my_message">
                    <i class="msg_remind"></i>
                    <a href="/u/4566560/messages" title="我的消息" target="_blank">
                        &lt;!&ndash; <span class="msg_icon" style="display: none;"></span> &ndash;&gt;
                        <i class="icon-mail"></i>
                        <span style="display: none;">我的消息</span>
                    </a>
                </li>-->
               <!-- <li class="set_btn user-card-box" id='header-user-card'>
                    <a id="header-avator" class="user-card-item js-header-avator" action-type="my_menu"  href="/u/4566560" target="_self">
                        <img width="40" height="40">
                        <i class="myspace_remind" style="display: none;"></i>
                        <span style="display: none;">动态提醒</span>
                    </a>
                    <div class="g-user-card"></div>
                </li>-->
            </ul>
        </div>


        <div class='search-warp clearfix' style='min-width: 32px; height: 60px;'>
           <!-- <div class="pa searchTags" >
                <a href="#" target="_blank">A</a>
            </div>

            <div class="search-area" data-search="top-banner">
                <input class="search-input" data-suggest-trigger="suggest-trigger"      type="text" autocomplete="off">
                <input type='hidden' class='btn_search' data-search-btn="search-btn" />
                <ul class="search-area-result" data-suggest-result="suggest-result">
                </ul>
            </div>
            <div class='showhide-search' data-show='no'><i class='icon-search'></i></div>-->
        </div>
    </div>
</div>

<div class="bindHintBox js-bindHintBox hide">
    <div class="pr">
        为了账号安全，请及时绑定邮箱和手机<a href="/user/setbindsns" class="ml20 color-red" target="_blank">立即绑定</a>
        <button  class="closeBindHint js-closeBindHint" type="button"></button>
        <div class="arrow"> </div>
    </div>
</div>


<div id="main">

    <div class="page-settings">
        <div class="top">
            <div class="w960 mauto top_title">
                <p>个人中心</p>
            </div>
        </div>
        <div class="setting pb10" style="height: 900px;">
            <div class="nav-tabs pa">
                <h class="baseinfo fl active">基本信息</h>
                <div class="cb"></div>
            </div>
            <div class="contentBox" >
                <div class="formBox">
                    <div id="setting-profile" class="setting-wrap setting-profile">

                        <div class="wlfg-wrap clearfix ">
                            <label class="label-name">头像：</label>
                            <div class="rlf-group">
                                <img class="fl avator-img" id="img" src="http://img.mukewang.com/58492fe600012e8e01800180-200-200.jpg" data-portrait="58492fe600012e8e01800180" width="180" height="180">
                                <div class="fl ml20 pr">
                                    <div id="avator-btns" class="avator-btn-inner">

                                        <div style="position: relative;">
                                            <!--设置input的position为absolute，使其不按文档流排版，并设置其包裹整个布局 -->
                                            <!-- 设置opactity为0，使input变透明 -->
                                            <!-- 只接受jpg，gif和png格式 -->
                                            <input id="imagelist" onchange="Req_ajax()" style="position: absolute; top: 0; bottom: 0; left: 0;right: 0; opacity: 0;" type="file" accept="image/gif, image/jpg, image/png" />
                                            <!-- 自定义按钮效果 -->
                                            <div style="margin-top: 80px;">
                                                <img id="upload" src="../upload.png" style="width: 30px; height: 30px; vertical-align: middle;" />
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="cb"></div>
                                <p class="rlf-tip-wrap errorHint color-red" ></p>
                            </div>
                        </div>

                        <form id="profile" >

                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="nick" >昵称：</label>
                                <div class="rlf-group">
                                    <input type="text" name="nickname" id="nick"  autocomplete="off"  data-validate="require-nick"  class="moco-form-control" value="Sequin_YF" placeholder="请输入昵称."/>
                                    <p class="rlf-tip-wrap errorHint color-red" ></p>
                                </div>
                            </div>


                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="province" >城市：</label>
                                <div class="rlf-group">
                                    <input type="text" name="province" id="province"  autocomplete="off"  data-validate="require-nick"  class="moco-form-control" value="" placeholder="请输入城市"/>
                                    <p class="rlf-tip-wrap errorHint color-red" ></p>
                                </div>
                            </div>

                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="province" >行业与职位：</label>
                                <div class="rlf-group">
                                    <input type="text" name="work" id="work"  autocomplete="off"  data-validate="require-nick"  class="moco-form-control" value="" placeholder="请输入从事行业"/>
                                    <p class="rlf-tip-wrap errorHint color-red" ></p>
                                </div>
                            </div>

                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="province" >教育经历：</label>
                                <div class="rlf-group">
                                    <input type="text" name="edcu" id="edcu"  autocomplete="off"  data-validate="require-nick"  class="moco-form-control" value="" placeholder="请输入教育经历"/>
                                    <p class="rlf-tip-wrap errorHint color-red" ></p>
                                </div>
                            </div>
                            <!--div class="wlfg-wrap clearfix">
                                <label class="label-name" for="job">职位：</label>
                                <div class="rlf-group">
                                    <select class="moco-form-control rlf-select" name="job" hidefocus="true" id="job" data-validate="require-select">
                                        <option value="">请选择职位</option>
                                        <option value="13" >学生</option>
                                        <option value="1" >页面重构设计</option>
                                        <option value="6" >Web前端工程师</option>
                                        <option value="5" >JS工程师</option>
                                        <option value="8" >PHP开发工程师</option>
                                        <option value="11" >JAVA开发工程师</option>
                                        <option value="7" >移动开发工程师</option>
                                        <option value="9" >软件测试工程师</option>
                                        <option value="10" >Linux系统工程师</option>
                                        <option value="2" >交互设计师</option>
                                        <option value="3" >产品经理</option>
                                        <option value="15" >数据库工程师</option>
                                        <option value="4" >UI设计师</option>
                                        <option value="17" >CG影视动画师</option>
                                        <option value="16" >全栈工程师</option>
                                    </select>
                                    <p class="rlf-tip-wrap errorHint color-red"></p>
                                </div>
                            </div!-->



                            <div class="wlfg-wrap clearfix">
                                <label class="label-name h16 lh16" >性别：</label>
                                <div class="rlf-group rlf-radio-group">
                                    <label  class="lh16"><input id="unknow" type="radio" hidefocus="true" value="保密"   name="sex">保密</label>
                                    <label  class="lh16"><input id="man" type="radio" hidefocus="true" value="男"  name="sex">男</label>
                                    <label  class="lh16"><input id="woman"  type="radio" hidefocus="true" value="女" checked="checked" name="sex">女</label>
                                    <p class="rlf-tip-wrap errorHint color-red"></p>
                                </div>
                            </div>
                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="aboutme">个性签名：</label>
                                <div class="rlf-group">
                                    <div class="pr">
                                        <textarea name="aboutme"  id="aboutme"  rows="5" class="noresize js-sign moco-form-control"></textarea>
                                        <p class="numCanInput js-numCanInput ">还可以输入128个字符</p>
                                    </div>
                                </div>
                            </div>

                            <div class="wlfg-wrap clearfix">
                                <label class="label-name" for="profile-submit"></label>
                                <div class="rlf-group">
                                    <span id="profile-submit"  onclick="doSubmit()" hidefocus="true"  aria-role="button" class="rlf-btn-green btn-block profile-btn">保存</span>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>

    </div>

</div>
<!--script-->
<script src="../ssologin.js?v=2.0"></script>
<script type="text/javascript" src="../sea.js"></script>
<script type="text/javascript" src="../sea_config.js?v=201612141100"></script>
<script type="text/javascript">seajs.use("../"+OP_CONFIG.module+"/"+OP_CONFIG.page);</script>





<div style="display: none">
    <script type="text/javascript">
        var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
        document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ff0cfcccd7b1393990c78efdeebff3968' type='text/javascript'%3E%3C/script%3E"));
        (function (d) {
            window.bd_cpro_rtid="rHT4P1c";
            var s = d.createElement("script");s.type = "text/javascript";s.async = true;s.src = location.protocol + "//cpro.baidu.com/cpro/ui/rt.js";
            var s0 = d.getElementsByTagName("script")[0];s0.parentNode.insertBefore(s, s0);
        })(document);
    </script>
    <script src="js/jquery.min.js"></script>
    <script>
        (function(){
            var bp = document.createElement('script');
            bp.src = '//push.zhanzhang.baidu.com/push.js';
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();

        //初始化加载函数
        $(function(){
            $.ajax({
                type : "post",
                url : "/userInfo/search",
                dataType : "json",
                data:{},
                success : function(data){

                    $("#work").val(data.data.work);
                    $("#edcu").val(data.data.edcu);
                    $("#img").attr("src",data.data.image_url);
                    $("#nick").val(data.data.user_name);
                    $("#province").val(data.data.city);
                    if (data.data.sex=="保密") {
                        $("#unknow").attr("checked", "checked");
                    }else if (data.data.sex=="男") {
                        $("#man").attr("checked", "checked");
                    }else if (data.data.sex=="女") {
                        $("#woman").attr("checked", "checked");
                    }
                    $("#aboutme").val(data.data.sign);

                }
            });
        })

        function Req_ajax() {
                // 获取file域里的图片信息
                var formData = new FormData();
                //创建formdata对象
                formData.append("test",document.getElementById("imagelist").files[0]);
                // 将文件信息 append 进入formdata对象  key值 为后台 single 设置的值
                $.ajax({
                    url: '/userInfo/img',
                    type: 'POST',
                    data: formData,
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function(data){
                        if (data.err==0) {
                            $('#img').attr('src',"http://localhost:3000/images/"+data.data)
                        }else {
                            alert("上传失败！");
                        }
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        document.getElementById("status").innerHTML = "<span style='color:#EF0000'>连接不到服务器，请检查网络！</span>";
                    }
                });
            }

        function doSubmit() {

            $.ajax({
                type : "post",
                url : "/userInfo/add",
                dataType : "json",
                data : {work:$("#work").val(),edcu:$("#edcu").val(),image_url:$("#img").attr("src"),user_name:$("#nick").val(),city:$("#province").val(),sex:$('input[name="sex"]:checked').val(),sign:$("#aboutme").val()},
                success : function(data){
                    if(data.result=='success') {
                        alert("保存成功");
                        window.location.reload();
                    }else{
                        alert("保存失败");
                    }
                }
            });
        }



    </script>
</div>
</body>
</html>
